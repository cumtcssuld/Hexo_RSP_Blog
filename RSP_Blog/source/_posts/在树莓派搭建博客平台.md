---
title: åœ¨æ ‘è“æ´¾æ­å»ºåšå®¢å¹³å°
date: 2020-04-12 10:21:12
categories:
	- web
	- ç¯å¢ƒæ­å»º
tags:
	- frp
	- æ ‘è“æ´¾
	- æ­å»º
excerpt: åœ¨æ ‘è“æ´¾ä¸Šæ­å»ºä¸€ä¸ªåšå®¢å¹³å°
---

> æœ¬æ–‡é¦–å‘äºä½œè€…xzlxrçš„ä¸ªäººç½‘ç«™ï¼Œæœ¬ç«™è·æˆæƒè½¬è½½ã€‚
>
> [ç‚¹å‡»è®¿é—®åŸæ–‡](http://xzaslxr.xyz/index.php/2020/03/19/zai-shu-mei-pai-da-jian-bo-ke/)

---

# åŸºæœ¬

## é•œåƒä¸‹è½½

* [kali   download_](https://www.offensive-security.com/kali-linux-arm-images/#1493408272250-e17e9049-9ce8)

* [raspbian](https://www.raspberrypi.org/downloads/)

	**æ¨èraspbian**

## çƒ§å½•

é€‰æ‹©é•œåƒ
ä½¿ç”¨win32DiskImagerçƒ§å½•
![æ‰¹æ³¨ 2020-03-05 151401.png](https://i0.wp.com/img.xzaslxr.xyz/img/20200412102617.png)

å½“win10å¼¹å‡ºè¯·æ±‚æ ¼å¼åŒ–çª—å£æ—¶ï¼Œå–æ¶ˆã€‚
çƒ§å½•æˆåŠŸçš„åˆ†åŒº

![æ‰¹æ³¨ 2020-03-05 151758.png](https://i2.wp.com/img.xzaslxr.xyz/img/20200412102619.png)


## ä½¿ç”¨sshè¿æ¥æ§åˆ¶ å¯åŠ¨å¹¶æ›´æ”¹rootå¯†ç 

>æ³¨æ„ æ‰“å¼€daspbian  sshéœ€è¦  æ·»åŠ  SSH æ–‡ä»¶(æ— åç»­)
>![æ‰¹æ³¨ 2020-03-05 152449.png](https://i1.wp.com/img.xzaslxr.xyz/img/20200412102621.png)

* æŸ¥çœ‹ ip

>ç™»å½•è·¯ç”±å™¨ç®¡ç†å‘˜é¡µé¢
>æˆ–ä½¿ç”¨ip æ‰«æå™¨ 192.168.1.1-192.168.1.254
>æˆ‘è¿™è¾¹æ˜¯192.168.1.115(æœ‰çº¿è¿æ¥)

* ä½¿ç”¨ssh.exeè¿æ¥ 

```bash
ssh pi@192.168.1.115
```


éœ€æ³¨æ„raspbianä¸€å¼€å§‹åªèƒ½ä½¿ç”¨ `pi` ç”¨æˆ·  ä¸”å¯†ç ä¸º`raspberry`

* raspbian

```bash
sudo passwd root #è®¾ç½®å¯†ç 
sudo passwd --unlock root #å¼€å¯rootè´¦æˆ·
```

* kali
	é»˜è®¤`root` å¯†ç ä¸º ` toor`

## æ›´æ–°æº

* kali

```bash
sudo nano /etc/apt/sources.list
#ä¸­ç§‘å¤§
deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib
deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib
#aliyun
deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib
deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib 
#æ¸…å
deb http://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free
deb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free
```

* raspbian
	[https://lug.ustc.edu.cn/wiki/mirrors/help/raspbian](https://lug.ustc.edu.cn/wiki/mirrors/help/raspbian)

### ä¿®æ”¹aptè½¯ä»¶æº  å’Œ ç³»ç»Ÿæº

æ·»åŠ è¿›å» ï¼Œæœ€å¥½å…ˆå¤‡ä»½

```bash
sudo nano /etc/apt/sources.list 
deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main contrib non-free rpi
deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main contrib non-free rpi
```

å®Œæˆæºçš„æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•

```bash
sudo apt-get update
```

æ¥ç€æ›´æ–°ç³»ç»Ÿæº

```
sudo nano /etc/apt/sources.list.d/raspi.list

deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui
deb-src http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui
```

æœ€å`sudo apt-get upgrade`

é…ç½®pipæº

```bash
~/.pip/pip.conf

[global]
index-url = http://pypi.douban.com/simple/
```

## æ‰“å¼€ è®¾ç½®wifi

```bash
sudo raspi-config
SSID:WIFI_NAME
password:WIFI_Password
```

åœ¨win10é€šè¿‡æŸ¥çœ‹wifiçš„å±æ€§æ¥è·å–SSID
![SSIDé…ç½®](http://img.xzaslxr.xyz/img/31220.png)

##  æ‰©å±•åˆ†åŒº

```bash
sudo raspi-config #é€‰æ‹©7 -> A1
```

`df -h`æŸ¥çœ‹

## winè¿œç¨‹ğŸ”—

1.å®‰è£…ç›¸å…³æœåŠ¡
å¸è½½åŸtightvnc
`sudo apt-get purge tightvnc xrdp`
å®‰è£…tighyvnc xrdp
`sudo apt-get install tightvncserver  xrdp`

2.å¼€å¯è¿æ¥
win+r  > mstsc
è¾“å…¥ç”¨æˆ·åå’Œå¯†ç å°±è¡Œ

## æŸ¥çœ‹æ ‘è“æ´¾ ä¿¡æ¯

* CPUæ¸©åº¦ã€CPUå ç”¨æƒ…å†µã€å†…å­˜å ç”¨æƒ…å†µå’Œç¡¬ç›˜å ç”¨

æ¥æº
[get-raspberry-the-current-status-and-data.html](https://shumeipai.nxez.com/2014/10/04/get-raspberry-the-current-status-and-data.html)

```python
import os
# Return CPU temperature as a character string
def getCPUtemperature():
    res = os.popen('vcgencmd measure_temp').readline()
    return(res.replace("temp=","").replace("'C\n",""))

# Return RAM information (unit=kb) in a list
# Index 0: total RAM
# Index 1: used RAM
# Index 2: free RAM
def getRAMinfo():
    p = os.popen('free')
    i = 0
    while 1:
        i = i + 1
        line = p.readline()
        if i==2:
            return(line.split()[1:4])

# Return % of CPU used by user as a character string
def getCPUuse():
    return(str(os.popen("top -n1 | awk '/Cpu\(s\):/ {print $2}'").readline().strip()))

# Return information about disk space as a list (unit included)                   # Index 0: total disk space                                                       # Index 1: used disk space                                                       # Index 2: remaining disk space                                                   # Index 3: percentage of disk used                                               def getDiskSpace():
    p = os.popen("df -h /")
    i = 0
    while 1:
        i = i +1
        line = p.readline()
        if i==2:
            return(line.split()[1:5])
# CPU informatiom
CPU_temp = getCPUtemperature()
CPU_usage = getCPUuse()

# RAM information
# Output is in kb, here I convert it in Mb for readability
RAM_stats = getRAMinfo()
RAM_total = round(int(RAM_stats[0]) / 1000,1)
RAM_used = round(int(RAM_stats[1]) / 1000,1)
RAM_free = round(int(RAM_stats[2]) / 1000,1)

# Disk information
DISK_stats = getDiskSpace()
DISK_total = DISK_stats[0]
DISK_used = DISK_stats[1]
DISK_perc = DISK_stats[3]

if __name__ == '__main__':
    print('')
    print('CPU Temperature = '+CPU_temp)
    print('CPU Use = '+CPU_usage)
    print('')
    print('RAM Total = '+str(RAM_total)+' MB')
    print('RAM Used = '+str(RAM_used)+' MB')
    print('RAM Free = '+str(RAM_free)+' MB')
    print('')  
    print('DISK Total Space = '+str(DISK_total)+'B')
    print('DISK Used Space = '+str(DISK_used)+'B')
    print('DISK Used Percentage = '+str(DISK_perc))
```

æ·»åŠ æ‰§è¡Œæƒé™å¹¶æ‰§è¡Œ

```bash
chmod +x get.py
python3 get.py
```

# ç½‘ç«™æ­å»º

## å®‰è£…Nginx + php 7.3 + MariaDB

### Nginx

```bash
sudo apt-get install -y nginx
```

### php

```bash
sudo apt install -y -t buster php7.3-fpm php7.3-curl php7.3-gd php7.3-intl php7.3-mbstring php7.3-mysql php7.3-imap php7.3-opcache php7.3-sqlite3 php7.3-xml php7.3-xmlrpc php7.3-zip
```

### MariaDB

```bash
sudo apt-get install mariadb-server 
```

* **è®¾ç½®åˆå§‹å¯†ç åŠä¿®æ”¹å¯†ç **

https://www.cnblogs.com/messhair/p/11782850.html

```MariaDB
MariaDB [(none)]> use mysql;
MariaDB [mysql]> UPDATE mysql.user SET password = PASSWORD('xzlxr@mysql') WHERE user = 'root';
MariaDB [mysql]> UPDATE user SET plugin='mysql_native_password' WHERE user = 'root';
MariaDB [mysql]> FLUSH PRIVILEGES;  #åˆ·æ–°æƒé™ç›¸å…³è¡¨æ ¼
```

**restart**

```bash
sudo service mariadb restart
```

**ç™»å½•**

```bash
mysql -u root -p
```

è¾“å…¥æ–°å¯†ç å³å¯

### apache2

```bash
sudo apt install apache2
sudo apt-get install libapache2-mod-php
```


## é…ç½®(æš‚æ—¶æ— å®‰å…¨åŠ å›º)

### Nginx é…ç½®

æ‰“å¼€é…ç½®æ–‡ä»¶

```bash
sudo  nano /etc/nginx/sites-available/default
```

è¿æ¥phpä»¥åŠæ·»åŠ  index.php

```bash
sudo service nginx restart 
sudo service php7.3-fpm restart
```

## å®‰è£…typecho

[å®˜ç½‘](http://typecho.org/)

```bash
sudo wget http://typecho.org/downloads/1.1-17.10.30-release.tar.gz
sudo tar zxvf 1.1-17.10.30-release.tar.gz
```

## wordpass

[å®˜ç½‘ä¸‹è½½](https://wordpress.com/)

## ä½¿ç”¨ Frp å®ç°å†…ç½‘ç©¿é€ï¼Œå…¬ç½‘è®¿é—®webæœåŠ¡å™¨ï¼Œè®¾ç½®è‡ªåŠ¨å¯åŠ¨ï¼Œåå°è¿è¡Œ

å‚è€ƒï¼š

[ä½¿ç”¨ Frp å®ç°å†…ç½‘ç©¿é€ï¼Œå…¬ç½‘è®¿é—®webæœåŠ¡å™¨ï¼Œè®¾ç½®è‡ªåŠ¨å¯åŠ¨ï¼Œåå°è¿è¡Œ](https://blog.csdn.net/u012963827/article/details/89427544?depth_1-utm_source=distribute.pc_relevant.none-task&utm_source=distribute.pc_relevant.none-task)
[é€šè¿‡frpç©¿é€å†…ç½‘sshè®¿é—®æ ‘è“æ´¾](https://blog.csdn.net/datana/article/details/86559217)



[https://github.com/fatedier/frp/releases](https://github.com/fatedier/frp/releases)

* å®¢æˆ·ç«¯é…ç½®

>åœ¨æ ‘è“æ´¾ä¸Š

```bash
wget https://github.com/fatedier/frp/releases/download/v0.32.0/frp_0.32_linux_arm.tar.gz
tar -zxvf frp_0.32_linux_arm.tar.gz
cd frp_0.32_linux_arm
sudo nano frpc.ini

[common]
token = XXXXXXXX #your_token
server_addr = xxx.xxx.xxx.xxx#æœåŠ¡å™¨ip
server_port = XXXX#æœåŠ¡å™¨ç«¯å£

[web]
type = http
local_ip = xxx.xxx.xxx.xxx #æœ¬åœ°ip
local_port = 80
remote_port = 80
custom_domains = #ä½ çš„åŸŸå
```

åœ¨æ ‘è“æ´¾ä¸Šæ·»åŠ è‡ªå¯

```shell
sudo nano /lib/systemd/system/frpc.service

[Unit]
Description=frpc service
After=network.target syslog.target
Wants=network.target

[Service]
Type=simple
ExecStart=/home/pi/frp/frpc -c /home/pi/frp/frpc.ini  

[Install]
WantedBy=multi-user.target
```



é‡å¯Frpcï¼Œå¯ä»¥ `sudo systemctl restart frpc`
åœæ­¢Frpcï¼Œå¯ä»¥ `sudo systemctl stop frpc`



## v2ray

[v2ray](https://github.com/jiangxufeng/v2rayL)

## SSR

[https://suool.net/2018/01/09/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%8A%98%E8%85%BE%E6%8C%87%E5%8D%97%E4%B9%8B%E4%BD%BF%E7%94%A8-SSR-%E5%AE%9E%E7%8E%B0%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/](https://suool.net/2018/01/09/æ ‘è“æ´¾æŠ˜è…¾æŒ‡å—ä¹‹ä½¿ç”¨-SSR-å®ç°ç§‘å­¦ä¸Šç½‘/)









### æ·»åŠ xml



ä¸€å¼€å§‹æƒ³ç›´æ¥ç”¨æ’ä»¶çš„(æ’ä»¶ï¼Œä»–ä¸é¦™å—)

ä½†é—®é¢˜æ˜¯ï¼Œæˆ‘çš„vpsæ˜¯ä»£ç†è½¬å‘çš„ï¼Œè€Œå®é™…çš„åšå®¢vpsåœ°å€ã€‚ã€‚ã€‚åªæœ‰å†…ç½‘åœ°å€*(192.168.1.xxx)*ï¼Œè¯•äº†google-sitemap(ä¸è¡Œ)ï¼Œæ”¹äº†wpä¸Šçš„urlè®¾ç½®è¿˜æ˜¯ä¸è¡Œã€‚ã€‚ã€‚

æœ€åçš„æ–¹æ¡ˆ:

* ç¼–å†™sitemap.php

> [æ¥æº](https://blog.csdn.net/u011781521/java/article/details/82814723)

```php
<?php
 
require('./wp-blog-header.php');
 
header("Content-type: text/xml");
 
header('HTTP/1.1 200 OK');
 
$posts_to_show = 1000;
 
echo '<?xml version="1.0" encoding="UTF-8"?>';
 
echo '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:mobile="http://www.baidu.com/schemas/sitemap-mobile/1/">'
 
?>
 
<!-- generated-on=<?php echo get_lastpostdate('blog'); ?> -->
 
<url>
 
<loc><?php echo get_home_url(); ?></loc>
 
<lastmod><?php $ltime = get_lastpostmodified(GMT);$ltime = gmdate('Y-m-d\TH:i:s+00:00', strtotime($ltime)); echo $ltime; ?></lastmod>
 
<changefreq>daily</changefreq>
 
<priority>1.0</priority>
 
</url>
 
<?php
 
/* æ–‡ç« é¡µé¢ */
 
$myposts = get_posts( "numberposts=" . $posts_to_show );
 
foreach( $myposts as $post ) { ?>
 
<url>
 
<loc><?php the_permalink(); ?></loc>
 
<lastmod><?php the_time('c') ?></lastmod>
 
<changefreq>monthly</changefreq>
 
<priority>0.6</priority>
 
</url>
 
<?php } /* æ–‡ç« å¾ªç¯ç»“æŸ */ ?>
 
<?php
 
/* å•é¡µé¢ */
 
$mypages = get_pages();
 
if(count($mypages) > 0) {
 
foreach($mypages as $page) { ?>
 
<url>
 
<loc><?php echo get_page_link($page->ID); ?></loc>
 
<lastmod><?php echo str_replace(" ","T",get_page($page->ID)->post_modified); ?>+00:00</lastmod>
 
<changefreq>weekly</changefreq>
 
<priority>0.6</priority>
 
</url>
 
<?php }} /* å•é¡µé¢å¾ªç¯ç»“æŸ */ ?>
 
<?php
 
/* åšå®¢åˆ†ç±» */
 
$terms = get_terms('category', 'orderby=name&hide_empty=0' );
 
$count = count($terms);
 
if($count > 0){
 
foreach ($terms as $term) { ?>
 
<url>
 
<loc><?php echo get_term_link($term, $term->slug); ?></loc>
 
<changefreq>weekly</changefreq>
 
<priority>0.8</priority>
 
</url>
 
<?php }} /* åˆ†ç±»å¾ªç¯ç»“æŸ */?>
 
<?php
 
/* æ ‡ç­¾(å¯é€‰) */
 
$tags = get_terms("post_tag");
 
foreach ( $tags as $key => $tag ) {
 
$link = get_term_link( intval($tag->term_id), "post_tag" );
 
if ( is_wp_error( $link ) )
 
return false;
 
$tags[ $key ]->link = $link;
 
?>
 
<url>
 
<loc><?php echo $link ?></loc>
 
<changefreq>monthly</changefreq>
 
<priority>0.4</priority>
 
</url>
 
<?php  } /* æ ‡ç­¾å¾ªç¯ç»“æŸ */ ?>
 
</urlset>

```



* ```
	Yoast SEO  #ç›®å‰æ¥çœ‹æœ€å¥½ç”¨çš„SEOæ’ä»¶
	```
